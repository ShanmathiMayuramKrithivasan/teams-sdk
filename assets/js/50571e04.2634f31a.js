"use strict";(self.webpackChunkteams_md=self.webpackChunkteams_md||[]).push([[5002],{18054:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>a,toc:()=>p});const a=JSON.parse('{"id":"typescript/in-depth-guides/ai/a2a/a2a-server","title":"A2A Server","description":"\x3c!--","source":"@site/docs/main/typescript/in-depth-guides/ai/a2a/a2a-server.mdx","sourceDirName":"typescript/in-depth-guides/ai/a2a","slug":"/typescript/in-depth-guides/ai/a2a/a2a-server","permalink":"/teams-sdk/typescript/in-depth-guides/ai/a2a/a2a-server","draft":false,"unlisted":false,"editUrl":"https://github.com/microsoft/teams-sdk/tree/main/teams.md/docs/main/typescript/in-depth-guides/ai/a2a/a2a-server.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"A2A Server","summary":"How to implement an A2A server to expose your Teams app capabilities to other agents using the A2A protocol.","languages":["typescript","python"]},"sidebar":"default","previous":{"title":"A2A Protocol","permalink":"/teams-sdk/typescript/in-depth-guides/ai/a2a/"},"next":{"title":"A2A Client","permalink":"/teams-sdk/typescript/in-depth-guides/ai/a2a/a2a-client"}}');var s=t(62540),r=t(43023),i=t(26802);t(50630);const l={sidebar_position:1,title:"A2A Server",summary:"How to implement an A2A server to expose your Teams app capabilities to other agents using the A2A protocol.",languages:["typescript","python"]},o="A2A Server",d={},p=[{value:"What is an A2A Server?",id:"what-is-an-a2a-server",level:2},{value:"Adding the <code>A2APlugin</code>",id:"adding-the-a2aplugin",level:2},{value:"Agent Card Exposure",id:"agent-card-exposure",level:2},{value:"Handling A2A Requests",id:"handling-a2a-requests",level:2},{value:"Sequence Diagram",id:"sequence-diagram",level:2}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"a2a-server",children:"A2A Server"})}),"\n",(0,s.jsx)(n.h2,{id:"what-is-an-a2a-server",children:"What is an A2A Server?"}),"\n",(0,s.jsx)(n.p,{children:"An A2A server is an agent that exposes its capabilities to other agents using the A2A protocol. With this package, you can make your Teams app accessible to A2A clients."}),"\n",(0,s.jsxs)(n.h2,{id:"adding-the-a2aplugin",children:["Adding the ",(0,s.jsx)(n.code,{children:"A2APlugin"})]}),"\n",(0,s.jsxs)(n.p,{children:["To enable A2A server functionality, add the ",(0,s.jsx)(n.code,{children:"A2APlugin"})," to your Teams app and provide an ",(0,s.jsx)(i.A,{language:"typescript",children:(0,s.jsx)(n.code,{children:"agentCard"})}),":"]}),"\n",(0,s.jsx)(i.A,{language:"typescript",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { AgentCard } from '@a2a-js/sdk';\nimport { A2APlugin } from '@microsoft/teams.a2a';\nimport { App } from '@microsoft/teams.apps';\n\nconst agentCard: AgentCard = {\n  name: 'Weather Agent',\n  description: 'An agent that can tell you the weather',\n  url: `http://localhost:${PORT}/a2a`,\n  version: '0.0.1',\n  protocolVersion: '0.3.0',\n  capabilities: {},\n  defaultInputModes: [],\n  defaultOutputModes: [],\n  skills: [\n    {\n      id: 'get_weather',\n      name: 'Get Weather',\n      description: 'Get the weather for a given location',\n      tags: ['weather', 'get', 'location'],\n      examples: [\n        'Get the weather for London',\n        'What is the weather',\n        \"What's the weather in Tokyo?\",\n        'How is the current temperature in San Francisco?',\n      ],\n    },\n  ],\n};\n\nconst app = new App({\n  plugins: [\n    new A2APlugin({\n      agentCard,\n    }),\n  ],\n});\n"})})}),"\n",(0,s.jsx)(n.h2,{id:"agent-card-exposure",children:"Agent Card Exposure"}),"\n",(0,s.jsxs)(n.p,{children:["The plugin automatically exposes your agent card at the path ",(0,s.jsx)(n.code,{children:"/a2a/.well-known/agent-card.json"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"handling-a2a-requests",children:"Handling A2A Requests"}),"\n",(0,s.jsxs)(n.p,{children:["Handle incoming A2A requests by adding an event handler for the ",(0,s.jsx)(n.code,{children:"a2a:message"})," event. You may use ",(0,s.jsx)(n.code,{children:"accumulateArtifacts"})," to iteratively accumulate artifacts for the task, or simply ",(0,s.jsx)(n.code,{children:"respond"})," with the final result."]}),"\n",(0,s.jsx)(i.A,{language:"typescript",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"app.event('a2a:message', async ({ respond, requestContext }) => {\n  logger.info(`Received message: ${requestContext.userMessage}`);\n  const textInput = requestContext.userMessage.parts\n    .filter((p): p is TextPart => p.kind === 'text')\n    .at(0)?.text;\n  if (!textInput) {\n    await respond('My agent currently only supports text input');\n    return;\n  }\n  const result = await myEventHandler(textInput);\n  await respond(result);\n});\n"})})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["You must have only a single handler that calls ",(0,s.jsx)(n.code,{children:"respond"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["You ",(0,s.jsx)(n.strong,{children:"must"})," call ",(0,s.jsx)(n.code,{children:"respond"})," as the last step in your handler. This resolves the open request to the caller."]}),"\n"]})}),"\n",(0,s.jsx)(n.h2,{id:"sequence-diagram",children:"Sequence Diagram"}),"\n",(0,s.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant A2A Client\n    participant App\n    participant A2APlugin\n    participant YourEventHandler\n\n    A2A Client->>App: /task/send\n    App->>A2APlugin: Call A2APlugin\n    A2APlugin->>YourEventHandler: Call your event handler a2a:message\n    YourEventHandler->>A2APlugin: Call respond\n    A2APlugin->>A2A Client: Return response"})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},26802:(e,n,t)=>{t.d(n,{A:()=>r});var a=t(22147),s=t(62540);function r({language:e,children:n}){return(0,a.zy)().pathname.includes(`/${e}/`)?(0,s.jsx)(s.Fragment,{children:n}):null}},50630:(e,n,t)=>{t(63696),t(5535),t(10883),t(62540)}}]);