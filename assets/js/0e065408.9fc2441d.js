"use strict";(self.webpackChunkteams_md=self.webpackChunkteams_md||[]).push([[1551],{26802:(e,n,t)=>{t.d(n,{A:()=>r});var i=t(22147),s=t(62540);function r({language:e,children:n}){return(0,i.zy)().pathname.includes(`/${e}/`)?(0,s.jsx)(s.Fragment,{children:n}):null}},43023:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>a});var i=t(63696);const s={},r=i.createContext(s);function d(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(r.Provider,{value:n},e.children)}},67255:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"python/essentials/app-authentication","title":"App Authentication","description":"\x3c!--","source":"@site/docs/main/python/essentials/app-authentication.mdx","sourceDirName":"python/essentials","slug":"/python/essentials/app-authentication","permalink":"/teams-sdk/python/essentials/app-authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/microsoft/teams-sdk/tree/main/teams.md/docs/main/python/essentials/app-authentication.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"App Authentication","summary":"Configure app authentication in your Teams SDK application using client secrets, user managed identities, or federated identity credentials","languages":["typescript","python"]},"sidebar":"default","previous":{"title":"Listening To Activities","permalink":"/teams-sdk/python/essentials/on-activity/"},"next":{"title":"Sending Messages","permalink":"/teams-sdk/python/essentials/sending-messages/"}}');var s=t(62540),r=t(43023),d=t(26802);const a={sidebar_position:5,title:"App Authentication",summary:"Configure app authentication in your Teams SDK application using client secrets, user managed identities, or federated identity credentials",languages:["typescript","python"]},o="App Authentication",l={},c=[{value:"Authentication Methods",id:"authentication-methods",level:2},{value:"Configuration Reference",id:"configuration-reference",level:2},{value:"Client Secret",id:"client-secret",level:2},{value:"Setup",id:"setup",level:3},{value:"Configuration",id:"configuration",level:3},{value:"User Managed Identity",id:"user-managed-identity",level:2},{value:"Setup",id:"setup-1",level:3},{value:"Configuration",id:"configuration-1",level:3},{value:"Configuration",id:"configuration-2",level:2},{value:"Federated Identity Credentials",id:"federated-identity-credentials",level:2},{value:"Setup",id:"setup-2",level:3},{value:"Configuration",id:"configuration-3",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"app-authentication",children:"App Authentication"})}),"\n",(0,s.jsxs)(n.p,{children:["Your application needs to authenticate to send messages to Teams as your bot. Authentication allows your app service to certify that it is ",(0,s.jsx)(n.em,{children:"allowed"})," to send messages as your Azure Bot."]}),"\n",(0,s.jsx)(n.admonition,{title:"Azure Setup Required",type:"info",children:(0,s.jsxs)(n.p,{children:["Before configuring your application, you must first set up authentication in Azure. See the ",(0,s.jsx)(n.a,{href:"/teams/app-authentication",children:"App Authentication Setup"})," guide for instructions on creating the necessary Azure resources."]})}),"\n",(0,s.jsx)(n.h2,{id:"authentication-methods",children:"Authentication Methods"}),"\n",(0,s.jsx)(n.p,{children:"There are 3 main ways of authenticating:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Client Secret"})," - Simple password-based authentication using a client secret"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"User Managed Identity"})," - Passwordless authentication using Azure managed identities"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Federated Identity Credentials"})," - Advanced identity federation using managed identities"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configuration-reference",children:"Configuration Reference"}),"\n",(0,s.jsx)(n.p,{children:"The Teams SDK automatically detects which authentication method to use based on the environment variables you set:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"CLIENT_ID"}),(0,s.jsx)(n.th,{children:"CLIENT_SECRET"}),(0,s.jsx)(n.th,{children:"MANAGED_IDENTITY_CLIENT_ID"}),(0,s.jsx)(n.th,{children:"Authentication Method"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"not_set"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"No-Auth (local development only)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"set"}),(0,s.jsx)(n.td,{children:"set"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"Client Secret"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"set"}),(0,s.jsx)(n.td,{children:"not_set"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"User Managed Identity"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"set"}),(0,s.jsx)(n.td,{children:"not_set"}),(0,s.jsx)(n.td,{children:"set (same as CLIENT_ID)"}),(0,s.jsx)(n.td,{children:"User Managed Identity"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"set"}),(0,s.jsx)(n.td,{children:"not_set"}),(0,s.jsx)(n.td,{children:"set (different from CLIENT_ID)"}),(0,s.jsx)(n.td,{children:"Federated Identity Credentials (UMI)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"set"}),(0,s.jsx)(n.td,{children:"not_set"}),(0,s.jsx)(n.td,{children:'"system"'}),(0,s.jsx)(n.td,{children:"Federated Identity Credentials (System Identity)"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"client-secret",children:"Client Secret"}),"\n",(0,s.jsx)(n.p,{children:"The simplest authentication method using a password-like secret."}),"\n",(0,s.jsx)(n.h3,{id:"setup",children:"Setup"}),"\n",(0,s.jsxs)(n.p,{children:["First, complete the ",(0,s.jsx)(n.a,{href:"/teams/app-authentication/client-secret",children:"Client Secret Setup"})," in Azure Portal or Azure CLI."]}),"\n",(0,s.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(n.p,{children:"Set the following environment variables in your application:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CLIENT_ID"}),": Your Application (client) ID"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CLIENT_SECRET"}),": The client secret value you created"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TENANT_ID"}),": The tenant id where your bot is registered"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-env",children:"CLIENT_ID=your-client-id-here\nCLIENT_SECRET=your-client-secret-here\nTENANT_ID=your-tenant-id\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The SDK will automatically use Client Secret authentication when both ",(0,s.jsx)(n.code,{children:"CLIENT_ID"})," and ",(0,s.jsx)(n.code,{children:"CLIENT_SECRET"})," are provided."]}),"\n",(0,s.jsx)(n.h2,{id:"user-managed-identity",children:"User Managed Identity"}),"\n",(0,s.jsx)(n.p,{children:"Passwordless authentication using Azure managed identities - no secrets to rotate or manage."}),"\n",(0,s.jsx)(n.h3,{id:"setup-1",children:"Setup"}),"\n",(0,s.jsxs)(n.p,{children:["First, complete the ",(0,s.jsx)(n.a,{href:"/teams/app-authentication/user-managed-identity",children:"User Managed Identity Setup"})," in Azure Portal or Azure CLI."]}),"\n",(0,s.jsx)(n.h3,{id:"configuration-1",children:"Configuration"}),"\n",(0,s.jsxs)(d.A,{language:"python",children:[(0,s.jsxs)(n.p,{children:["Your application should automatically use User Managed Identity authentication when you provide the ",(0,s.jsx)(n.code,{children:"CLIENT_ID"})," environment variable without a ",(0,s.jsx)(n.code,{children:"CLIENT_SECRET"}),"."]}),(0,s.jsx)(n.h2,{id:"configuration-2",children:"Configuration"}),(0,s.jsx)(n.p,{children:"Set the following environment variables in your application:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CLIENT_ID"}),": Your Application (client) ID"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Do not set"})," ",(0,s.jsx)(n.code,{children:"CLIENT_SECRET"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TENANT_ID"}),": The tenant id where your bot is registered"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-env",children:"CLIENT_ID=your-client-id-here\n# Do not set CLIENT_SECRET\nTENANT_ID=your-tenant-id\n"})})]}),"\n",(0,s.jsx)(n.h2,{id:"federated-identity-credentials",children:"Federated Identity Credentials"}),"\n",(0,s.jsx)(n.p,{children:"Advanced identity federation allowing you to assign managed identities directly to your App Registration."}),"\n",(0,s.jsx)(n.h3,{id:"setup-2",children:"Setup"}),"\n",(0,s.jsxs)(n.p,{children:["First, complete the ",(0,s.jsx)(n.a,{href:"/teams/app-authentication/federated-identity-credentials",children:"Federated Identity Credentials Setup"})," in Azure Portal or Azure CLI."]}),"\n",(0,s.jsx)(n.h3,{id:"configuration-3",children:"Configuration"}),"\n",(0,s.jsx)(n.p,{children:"Depending on the type of managed identity you select, set the environment variables accordingly."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"For User Managed Identity:"})}),"\n",(0,s.jsx)(n.p,{children:"Set the following environment variables:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CLIENT_ID"}),": Your Application (client) ID"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"MANAGED_IDENTITY_CLIENT_ID"}),": The Client ID for the User Managed Identity resource"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Do not set"})," ",(0,s.jsx)(n.code,{children:"CLIENT_SECRET"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TENANT_ID"}),": The tenant id where your bot is registered"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-env",children:"CLIENT_ID=your-app-client-id-here\nMANAGED_IDENTITY_CLIENT_ID=your-managed-identity-client-id-here\n# Do not set CLIENT_SECRET\nTENANT_ID=your-tenant-id\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"For System Assigned Identity:"})}),"\n",(0,s.jsx)(n.p,{children:"Set the following environment variables:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CLIENT_ID"}),": Your Application (client) ID"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"MANAGED_IDENTITY_CLIENT_ID"}),": ",(0,s.jsx)(n.code,{children:"system"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Do not set"})," ",(0,s.jsx)(n.code,{children:"CLIENT_SECRET"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TENANT_ID"}),": The tenant id where your bot is registered"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-env",children:"CLIENT_ID=your-app-client-id-here\nMANAGED_IDENTITY_CLIENT_ID=system\n# Do not set CLIENT_SECRET\nTENANT_ID=your-tenant-id\n"})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsxs)(n.p,{children:["If you encounter authentication errors, see the ",(0,s.jsx)(n.a,{href:"/teams/app-authentication/troubleshooting",children:"Authentication Troubleshooting"})," guide for common issues and solutions."]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);