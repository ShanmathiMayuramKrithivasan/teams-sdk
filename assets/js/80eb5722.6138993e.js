"use strict";(self.webpackChunkteams_md=self.webpackChunkteams_md||[]).push([[8554],{26802:(e,n,t)=>{t.d(n,{A:()=>r});var s=t(22147),i=t(62540);function r({language:e,children:n}){return(0,s.zy)().pathname.includes(`/${e}/`)?(0,i.jsx)(i.Fragment,{children:n}):null}},35042:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"python/essentials/on-event","title":"Listening to Events","description":"\x3c!--","source":"@site/docs/main/python/essentials/on-event.mdx","sourceDirName":"python/essentials","slug":"/python/essentials/on-event","permalink":"/teams-sdk/python/essentials/on-event","draft":false,"unlisted":false,"editUrl":"https://github.com/microsoft/teams-sdk/tree/main/teams.md/docs/main/python/essentials/on-event.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"Listening to Events","title":"Listening to Events","summary":"Understanding how to listen to and handle events in Teams SDK applications, including user actions and application server events."},"sidebar":"default","previous":{"title":"App Basics","permalink":"/teams-sdk/python/essentials/app-basics"},"next":{"title":"Listening To Activities","permalink":"/teams-sdk/python/essentials/on-activity/"}}');var i=t(62540),r=t(43023),a=t(26802);const o={sidebar_position:2,sidebar_label:"Listening to Events",title:"Listening to Events",summary:"Understanding how to listen to and handle events in Teams SDK applications, including user actions and application server events."},d="Listening To Events",c={},l=[{value:"Example 1",id:"example-1",level:3},{value:"Example 2",id:"example-2",level:3}];function h(e){const n={admonition:"admonition",code:"code",h1:"h1",h3:"h3",header:"header",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"listening-to-events",children:"Listening To Events"})}),"\n",(0,i.jsxs)(n.p,{children:["An ",(0,i.jsx)(n.strong,{children:"event"})," is a foundational concept in building agents \u2014 it represents something noteworthy happening either on Microsoft Teams or within your application. These events can originate from the user (e.g. installing or uninstalling your app, sending a message, submitting a form), or from your application server (e.g. startup, error in a handler)."]}),"\n",(0,i.jsx)(a.A,{language:"python",children:(0,i.jsx)(n.mermaid,{value:'flowchart LR\n    Teams["Teams"]:::less-interesting\n    Server["App Server"]:::interesting\n    AppEventHandlers["Event Handler (app.event())"]:::interesting\n\n    Teams --\x3e |Activity| Server\n    Teams --\x3e |Signed In| Server\n    Teams --\x3e |...other<br/>incoming events| Server\n    Server ---\x3e |incoming<br/>events| AppEventHandlers\n    Server ---\x3e |outgoing<br/>events<br/>| AppEventHandlers\n\n\n    linkStyle 0,1,2,3,4 stroke:#b1650f,stroke-width:1px\n    classDef interesting fill:#b1650f,stroke:#333,stroke-width:4px;'})}),"\n",(0,i.jsx)(n.p,{children:"The Teams SDK makes it easy to subscribe to these events and respond appropriately. You can register event handlers to take custom actions when specific events occur \u2014 such as logging errors, triggering workflows, or sending follow-up messages."}),"\n",(0,i.jsx)(n.p,{children:"Here are the events that you can start building handlers for:"}),"\n",(0,i.jsxs)(a.A,{language:"python",children:[(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Event Name"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Description"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"start"})}),(0,i.jsx)(n.td,{children:"Triggered when your application starts. Useful for setup or boot-time logging."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sign_in"})}),(0,i.jsx)(n.td,{children:"Triggered during a sign-in flow via Teams."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"error"})}),(0,i.jsx)(n.td,{children:"Triggered when an unhandled error occurs in your app. Great for diagnostics."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"activity"})}),(0,i.jsx)(n.td,{children:"Triggered for all incoming Teams activities (messages, commands, etc.)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"activity_response"})}),(0,i.jsx)(n.td,{children:"Triggered when your app sends a response to an activity. Useful for logging."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"activity_sent"})}),(0,i.jsx)(n.td,{children:"Triggered when an activity is sent (not necessarily in response)."})]})]})]}),(0,i.jsx)("br",{}),(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["Event handler registration uses ",(0,i.jsx)(n.code,{children:'@app.event("<event_name>")'})," with an async function that receives an event object specific to the event type (e.g., ",(0,i.jsx)(n.code,{children:"ErrorEvent"}),", ",(0,i.jsx)(n.code,{children:"ActivityEvent"}),")."]})})]}),"\n",(0,i.jsx)(n.h3,{id:"example-1",children:"Example 1"}),"\n",(0,i.jsx)(n.p,{children:"We can subscribe to errors that occur in the app."}),"\n",(0,i.jsx)(a.A,{language:"python",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'@app.event("error")\nasync def handle_error(event: ErrorEvent):\n    """Handle error events."""\n    print(f"Error occurred: {event.error}")\n    if hasattr(event, "context") and event.context:\n        print(f"Context: {event.context}")\n'})})}),"\n",(0,i.jsx)(n.h3,{id:"example-2",children:"Example 2"}),"\n",(0,i.jsxs)(a.A,{language:"python",children:[(0,i.jsx)(n.p,{children:"When an activity is received, log its payload."}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'@app.event("activity")\nasync def handle_activity(event: ActivityEvent):\n    """Handle activity events."""\n    print(f"Activity received: {event.activity}")\n'})})]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},43023:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var s=t(63696);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);