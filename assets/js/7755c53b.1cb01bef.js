"use strict";(self.webpackChunkteams_md=self.webpackChunkteams_md||[]).push([[1328],{26802:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(22147),i=t(62540);function s({language:e,children:n}){return(0,a.zy)().pathname.includes(`/${e}/`)?(0,i.jsx)(i.Fragment,{children:n}):null}},43023:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var a=t(63696);const i={},s=a.createContext(i);function r(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(s.Provider,{value:n},e.children)}},90673:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>A,frontMatter:()=>o,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"typescript/in-depth-guides/ai/a2a/a2a-client","title":"A2A Client","description":"\x3c!--","source":"@site/docs/main/typescript/in-depth-guides/ai/a2a/a2a-client.mdx","sourceDirName":"typescript/in-depth-guides/ai/a2a","slug":"/typescript/in-depth-guides/ai/a2a/a2a-client","permalink":"/teams-sdk/typescript/in-depth-guides/ai/a2a/a2a-client","draft":false,"unlisted":false,"editUrl":"https://github.com/microsoft/teams-sdk/tree/main/teams.md/docs/main/typescript/in-depth-guides/ai/a2a/a2a-client.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"A2A Client","sidebar_label":"A2A Client","summary":"How to implement an A2A client to proactively send tasks to A2A servers using the AgentManager.","languages":["typescript","python"]},"sidebar":"default","previous":{"title":"A2A Server","permalink":"/teams-sdk/typescript/in-depth-guides/ai/a2a/a2a-server"},"next":{"title":"Tabs","permalink":"/teams-sdk/typescript/in-depth-guides/tabs/"}}');var i=t(62540),s=t(43023),r=t(26802);const o={sidebar_position:2,title:"A2A Client",sidebar_label:"A2A Client",summary:"How to implement an A2A client to proactively send tasks to A2A servers using the AgentManager.",languages:["typescript","python"]},l="A2A Client",c={},d=[{value:"What is an A2A Client?",id:"what-is-an-a2a-client",level:2},{value:"Using <code>A2AClient</code> Directly",id:"using-a2aclient-directly",level:2},{value:"Using <code>A2AClientPlugin</code> with ChatPrompt",id:"using-a2aclientplugin-with-chatprompt",level:2},{value:"Advanced <code>A2AClientPlugin</code> Configuration",id:"advanced-a2aclientplugin-configuration",level:3},{value:"Sequence Diagram",id:"sequence-diagram",level:2}];function p(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",mermaid:"mermaid",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"a2a-client",children:"A2A Client"})}),"\n",(0,i.jsx)(n.h2,{id:"what-is-an-a2a-client",children:"What is an A2A Client?"}),"\n",(0,i.jsx)(n.p,{children:"An A2A client is an agent or application that can proactively send tasks to A2A servers and interact with them using the A2A protocol."}),"\n",(0,i.jsxs)(n.h2,{id:"using-a2aclient-directly",children:["Using ",(0,i.jsx)(n.code,{children:"A2AClient"})," Directly"]}),"\n",(0,i.jsxs)(n.p,{children:["For direct control over A2A interactions, you can use the ",(0,i.jsx)(n.code,{children:"A2AClient"})," from the SDK:"]}),"\n",(0,i.jsx)(r.A,{language:"typescript",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { A2AClient } from '@a2a-js/sdk/client';\n\n// Create client from agent card URL\nconst client = await A2AClient.fromCardUrl('http://localhost:4000/a2a/.well-known/agent-card.json');\n\n// Send a message directly\nconst response = await client.sendMessage({\n  message: {\n    messageId: 'unique-id',\n    role: 'user',\n    parts: [{ kind: 'text', text: 'What is the weather?' }],\n    kind: 'message',\n  },\n});\n"})})}),"\n",(0,i.jsxs)(n.h2,{id:"using-a2aclientplugin-with-chatprompt",children:["Using ",(0,i.jsx)(n.code,{children:"A2AClientPlugin"})," with ChatPrompt"]}),"\n",(0,i.jsxs)(n.p,{children:["A2A is most effective when used with an LLM. The ",(0,i.jsx)(n.code,{children:"A2AClientPlugin"})," can be added to your chat prompt to allow interaction with A2A agents. Once added, the plugin will automatically configure the system prompt and tool calls to determine if the a2a server is needed for a particular task, and if so, it will do the work of orchestrating the call to the A2A server."]}),"\n",(0,i.jsx)(r.A,{language:"typescript",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { A2AClientPlugin } from '@microsoft/teams.a2a';\nimport { ChatPrompt } from '@microsoft/teams.ai';\nimport { OpenAIChatModel } from '@microsoft/teams.openai';\n\nconst prompt = new ChatPrompt(\n  {\n    model: new OpenAIChatModel({\n      apiKey: process.env.AZURE_OPENAI_API_KEY,\n      model: process.env.AZURE_OPENAI_MODEL!,\n      endpoint: process.env.AZURE_OPENAI_ENDPOINT,\n      apiVersion: process.env.AZURE_OPENAI_API_VERSION,\n    }),\n  },\n  // Add the A2AClientPlugin to the prompt\n  [new A2AClientPlugin()]\n)\n  // Provide the agent's card URL\n  .usePlugin('a2a', {\n    key: 'my-weather-agent',\n    cardUrl: 'http://localhost:4000/a2a/.well-known/agent-card.json',\n  });\n"})})}),"\n",(0,i.jsx)(n.p,{children:"To send a message:"}),"\n",(0,i.jsx)(r.A,{language:"typescript",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Now we can send the message to the prompt and it will decide if\n// the a2a agent should be used or not and also manages contacting the agent\nconst result = await prompt.send(message);\n"})})}),"\n",(0,i.jsxs)(n.h3,{id:"advanced-a2aclientplugin-configuration",children:["Advanced ",(0,i.jsx)(n.code,{children:"A2AClientPlugin"})," Configuration"]}),"\n",(0,i.jsx)(n.p,{children:"You can customize how the client interacts with A2A agents by providing custom builders:"}),"\n",(0,i.jsx)(r.A,{language:"typescript",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Example with custom message builders and response processors\nexport const advancedPrompt = new ChatPrompt(\n  {\n    model: new OpenAIChatModel({\n      apiKey: process.env.AZURE_OPENAI_API_KEY,\n      model: process.env.AZURE_OPENAI_MODEL!,\n      endpoint: process.env.AZURE_OPENAI_ENDPOINT,\n      apiVersion: process.env.AZURE_OPENAI_API_VERSION,\n    }),\n  },\n  [\n    new A2AClientPlugin({\n      // Custom function metadata builder\n      buildFunctionMetadata: (card) => ({\n        name: `ask${card.name.replace(/\\s+/g, '')}`,\n        description: `Ask ${card.name} about ${card.description || 'anything'}`,\n      }),\n      // Custom message builder - can return either Message or string\n      buildMessageForAgent: (card, input) => {\n        // Return a string - will be automatically wrapped in a Message\n        return `[To ${card.name}]: ${input}`;\n      },\n      // Custom response processor\n      buildMessageFromAgentResponse: (card, response) => {\n        if (response.kind === 'message') {\n          const textParts = response.parts\n            .filter((part) => part.kind === 'text')\n            .map((part) => part.text);\n          return `${card.name} says: ${textParts.join(' ')}`;\n        }\n        return `${card.name} sent a non-text response.`;\n      },\n    }),\n  ]\n).usePlugin('a2a', {\n  key: 'weather-agent',\n  cardUrl: 'http://localhost:4000/a2a/.well-known/agent-card.json',\n});\n"})})}),"\n",(0,i.jsx)(n.h2,{id:"sequence-diagram",children:"Sequence Diagram"}),"\n",(0,i.jsxs)(n.p,{children:["Here's how the A2A client works with ",(0,i.jsx)(n.code,{children:"ChatPrompt"})," and ",(0,i.jsx)(n.code,{children:"A2AClientPlugin"}),":"]}),"\n",(0,i.jsx)(r.A,{language:"typescript",children:(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant User\n    participant ChatPrompt\n    participant A2AClientPlugin\n    participant A2AClient\n    participant LLM\n    participant A2AServer\n\n    Note over User,A2AServer: Configuration\n    User->>ChatPrompt: usePlugin('a2a', {cardUrl})\n    ChatPrompt->>A2AClientPlugin: onUsePlugin()\n\n    Note over User,A2AServer: Message Flow\n    User->>ChatPrompt: send(message)\n    ChatPrompt->>A2AClientPlugin: onBuildPrompt()\n    A2AClientPlugin->>A2AClient: getAgentCard()\n    A2AClient->>A2AServer: GET /.well-known/agent-card.json\n    A2AServer--\x3e>A2AClient: AgentCard\n    A2AClient--\x3e>A2AClientPlugin: AgentCard\n    A2AClientPlugin--\x3e>ChatPrompt: Enhanced system prompt\n\n    ChatPrompt->>A2AClientPlugin: onBuildFunctions()\n    A2AClientPlugin--\x3e>ChatPrompt: Function tools for agents\n\n    ChatPrompt->>LLM: Enhanced prompt + tools\n    LLM--\x3e>ChatPrompt: Function call (messageAgent)\n    ChatPrompt->>A2AClientPlugin: Execute function handler\n    A2AClientPlugin->>A2AClient: sendMessage()\n    A2AClient->>A2AServer: POST /a2a/task/send\n    A2AServer--\x3e>A2AClient: Response\n    A2AClient--\x3e>A2AClientPlugin: Response\n    A2AClientPlugin--\x3e>ChatPrompt: Processed response\n    ChatPrompt--\x3e>User: Final response"})})]})}function A(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}}}]);